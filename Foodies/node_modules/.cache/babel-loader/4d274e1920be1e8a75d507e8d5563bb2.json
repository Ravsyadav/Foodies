{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Ravs yadav\\\\Documents\\\\Food Delivery Website\\\\Foodie\\\\src\\\\Components\\\\Details.js\";\nimport { Component } from 'react';\nimport { Carousel } from 'react-responsive-carousel';\nimport queryString from 'query-string';\nimport axios from 'axios';\nimport { Tab, Tabs, TabList, TabPanel } from 'react-tabs';\nimport Modal from 'react-modal';\nimport \"react-responsive-carousel/lib/styles/carousel.min.css\";\nimport 'react-tabs/style/react-tabs.css';\nimport \"../Styles/details.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst customStyles = {\n  content: {\n    top: '50%',\n    left: '50%',\n    right: 'auto',\n    bottom: 'auto',\n    marginRight: '-50%',\n    transform: 'translate(-50%, -50%)',\n    border: '2px solid tomato',\n    width: '550px'\n  }\n};\n\nclass Details extends Component {\n  constructor() {\n    super();\n\n    this.openMenuHandler = () => {\n      this.setState({\n        isMenuModalOpen: true\n      });\n    };\n\n    this.closeMenuHandler = () => {\n      this.setState({\n        isMenuModalOpen: false\n      });\n    };\n\n    this.addItemHnadler = item => {\n      const {\n        totalPrice\n      } = this.state;\n      this.setState({\n        totalPrice: totalPrice + item.itemPrice\n      });\n    };\n\n    this.getCheckSum = data => {\n      return fetch('http://localhost:5402/api/payment', {\n        method: 'POST',\n        headers: {\n          Accept: 'application/json',\n          \"Content-Type\": 'application/json'\n        },\n        body: JSON.stringify(data)\n      }).then(result => {\n        return result.json();\n      }).catch(error => {\n        console.log(error);\n      });\n    };\n\n    this.isObj = val => {\n      return typeof val === 'object';\n    };\n\n    this.isDate = val => {\n      return Object.prototype.toString.call(val) === '[object Date]';\n    };\n\n    this.stringifyValue = value => {\n      if (this.isObj(value) && !this.isDate(value)) {\n        return JSON.stringify(value);\n      } else {\n        return value;\n      }\n    };\n\n    this.builfForm = details => {\n      const {\n        action,\n        params\n      } = details;\n      const form = document.createElement('form');\n      form.setAttribute('method', 'post');\n      form.setAttribute('action', action);\n      Object.keys(params).forEach(key => {\n        const input = document.createElement('input');\n        input.setAttribute('type', 'hidden');\n        input.setAttribute('name', key);\n        input.setAttribute('value', this.stringifyValue(params[key]));\n        form.appendChild(input);\n      });\n      return form;\n    };\n\n    this.postTheInfo = details => {\n      const form = this.builfForm(details);\n      document.body.appendChild(form);\n      form.submit();\n      form.remove();\n    };\n\n    this.paymentHandler = () => {\n      if (this.state.totalPrice == 0) {\n        return;\n      }\n\n      const data = {\n        amount: this.state.totalPrice,\n        email: 'XXXXXXXX@gmail.com',\n        mobileNo: '9999999999'\n      };\n      this.getCheckSum(data).then(result => {\n        let information = {\n          action: \"https://securegw-stage.paytm.in/order/process\",\n          // URL of paytm server\n          params: result\n        };\n        this.postTheInfo(information);\n      }).catch(error => {\n        console.log(error);\n      });\n    };\n\n    this.state = {\n      restaurant: undefined,\n      isMenuModalOpen: false,\n      menu: [],\n      totalPrice: 0\n    };\n  }\n\n  componentDidMount() {\n    // get the restaurant id from the query params\n    const qs = queryString.parse(this.props.location.search);\n    const {\n      id\n    } = qs; // make an API call to get the restaurant details for the given id\n\n    axios.get(`http://localhost:5402/api/getRestaurantByID/${id}`).then(result => {\n      this.setState({\n        restaurant: result.data.restaurant[0]\n      });\n    }).catch(error => {\n      console.log(error);\n    });\n    axios.get(`http://localhost:5402/api/getMenuByRestaurant/${id}`).then(result => {\n      this.setState({\n        menu: result.data.menu\n      });\n    }).catch(error => {\n      console.log(error);\n    });\n  }\n\n  render() {\n    const {\n      restaurant,\n      isMenuModalOpen,\n      menu,\n      totalPrice\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container py-5\",\n      children: restaurant ? /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"images mt-5\",\n          children: /*#__PURE__*/_jsxDEV(Carousel, {\n            dynamicHeight: false,\n            showThumbs: false,\n            infiniteLoop: true,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: require(\"../Assets/img2.jpg\").default,\n                alt: \"myimage\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 171,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 170,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: require(\"../Assets/img1.jpg\").default,\n                alt: \"myimage\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 174,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 173,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: require(\"../Assets/img3.jpg\").default,\n                alt: \"myimage\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 177,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 176,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: require(\"../Assets/image.png\").default,\n                alt: \"myimage\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 180,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 179,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"restName mt-4 mb-3\",\n          children: [restaurant.name, /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-danger float-end\",\n            onClick: this.openMenuHandler,\n            children: \"Place Online Order\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mytabs\",\n          children: /*#__PURE__*/_jsxDEV(Tabs, {\n            children: [/*#__PURE__*/_jsxDEV(TabList, {\n              children: [/*#__PURE__*/_jsxDEV(Tab, {\n                children: \"Overview\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 191,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(Tab, {\n                children: \"Contact\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 192,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 190,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(TabPanel, {\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"container\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"about\",\n                  children: \"About this place\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 197,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"cuisine\",\n                  children: \"Cuisine\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 198,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"cuisines mt-1\",\n                  children: restaurant.cuisine.map((item, index) => {\n                    return /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: [\" \", item.name, \", \"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 202,\n                      columnNumber: 60\n                    }, this);\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 199,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"cuisine mt-3\",\n                  children: \"Average Cost\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 206,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"cuisines mt-1\",\n                  children: [\"\\u20B9 \", restaurant.min_price, \" for two people (approx.)\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 207,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 196,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 195,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(TabPanel, {\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"container\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"cuisines my-3\",\n                  children: [\"Phone Number\", /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-danger\",\n                    children: restaurant.contact_number\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 216,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 214,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"cuisine mt-5\",\n                  children: restaurant.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 220,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-muted\",\n                  children: [restaurant.locality, \", \", restaurant.city]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 221,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 213,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 212,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Modal, {\n          isOpen: isMenuModalOpen,\n          style: customStyles,\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"restName\",\n            children: restaurant.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: this.closeMenuHandler,\n            className: \"btn btn-light closeBtn\",\n            children: \"Close\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n            className: \"menu\",\n            children: menu.map((item, index) => {\n              return /*#__PURE__*/_jsxDEV(\"li\", {\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"row no-gutters menuItem\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"col-10\",\n                    children: [item.isVeg ? /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"text-success\",\n                      children: \"Veg\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 238,\n                      columnNumber: 57\n                    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"text-danger\",\n                      children: \"Non-Veg\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 240,\n                      columnNumber: 57\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"cuisines\",\n                      children: item.itemName\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 242,\n                      columnNumber: 53\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"cuisines\",\n                      children: [\"\\u20B9\", item.itemPrice]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 243,\n                      columnNumber: 53\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"cuisines item-desc text-muted\",\n                      children: item.itemDescription\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 244,\n                      columnNumber: 53\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 234,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"col-2\",\n                    children: /*#__PURE__*/_jsxDEV(\"button\", {\n                      className: \"btn btn-light addButton\",\n                      onClick: () => this.addItemHnadler(item),\n                      children: \"Add\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 247,\n                      columnNumber: 53\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 246,\n                    columnNumber: 49\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 233,\n                  columnNumber: 45\n                }, this)\n              }, index, false, {\n                fileName: _jsxFileName,\n                lineNumber: 232,\n                columnNumber: 48\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 229,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-3 restName fs-4\",\n            children: [\"Subtotal  \", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"m-4\",\n              children: [\"\\u20B9\", totalPrice]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 255,\n              columnNumber: 43\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-danger float-end\",\n              onClick: this.paymentHandler,\n              children: \"Pay Now\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 256,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 254,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 21\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-dark m-5 p-5 fs-6\",\n        children: \"Loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default Details;","map":{"version":3,"sources":["C:/Users/Ravs yadav/Documents/Food Delivery Website/Foodie/src/Components/Details.js"],"names":["Component","Carousel","queryString","axios","Tab","Tabs","TabList","TabPanel","Modal","customStyles","content","top","left","right","bottom","marginRight","transform","border","width","Details","constructor","openMenuHandler","setState","isMenuModalOpen","closeMenuHandler","addItemHnadler","item","totalPrice","state","itemPrice","getCheckSum","data","fetch","method","headers","Accept","body","JSON","stringify","then","result","json","catch","error","console","log","isObj","val","isDate","Object","prototype","toString","call","stringifyValue","value","builfForm","details","action","params","form","document","createElement","setAttribute","keys","forEach","key","input","appendChild","postTheInfo","submit","remove","paymentHandler","amount","email","mobileNo","information","restaurant","undefined","menu","componentDidMount","qs","parse","props","location","search","id","get","render","require","default","name","cuisine","map","index","min_price","contact_number","locality","city","isVeg","itemName","itemDescription"],"mappings":"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","sourcesContent":["import { Component } from 'react';\r\nimport { Carousel } from 'react-responsive-carousel';\r\nimport queryString from 'query-string';\r\nimport axios from 'axios';\r\nimport { Tab, Tabs, TabList, TabPanel } from 'react-tabs';\r\nimport Modal from 'react-modal';\r\n\r\nimport \"react-responsive-carousel/lib/styles/carousel.min.css\";\r\nimport 'react-tabs/style/react-tabs.css';\r\nimport \"../Styles/details.css\";\r\n\r\nconst customStyles = {\r\n    content: {\r\n        top: '50%',\r\n        left: '50%',\r\n        right: 'auto',\r\n        bottom: 'auto',\r\n        marginRight: '-50%',\r\n        transform: 'translate(-50%, -50%)',\r\n        border: '2px solid tomato',\r\n        width: '550px'\r\n    }\r\n};\r\n\r\nclass Details extends Component {\r\n\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            restaurant: undefined,\r\n            isMenuModalOpen: false,\r\n            menu: [],\r\n            totalPrice: 0\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        // get the restaurant id from the query params\r\n        const qs = queryString.parse(this.props.location.search);\r\n        const { id } = qs;\r\n\r\n        // make an API call to get the restaurant details for the given id\r\n        axios.get(`http://localhost:5402/api/getRestaurantByID/${id}`)\r\n            .then(result => {\r\n                this.setState({\r\n                    restaurant: result.data.restaurant[0]\r\n                });\r\n            })\r\n            .catch(error => {\r\n                console.log(error);\r\n            });\r\n        \r\n        axios.get(`http://localhost:5402/api/getMenuByRestaurant/${id}`)\r\n            .then(result => {\r\n                this.setState({\r\n                    menu: result.data.menu\r\n                });\r\n            })\r\n            .catch(error => {\r\n                console.log(error);\r\n            });\r\n    }\r\n\r\n    openMenuHandler = () => {\r\n        this.setState({\r\n            isMenuModalOpen: true\r\n        });\r\n    }\r\n\r\n    closeMenuHandler = () => {\r\n        this.setState({\r\n            isMenuModalOpen: false\r\n        });\r\n    }\r\n\r\n    addItemHnadler = (item) => {\r\n        const { totalPrice } = this.state;\r\n        this.setState({\r\n            totalPrice: totalPrice + item.itemPrice\r\n        });\r\n    }\r\n\r\n    getCheckSum = (data) => {\r\n        return fetch('http://localhost:5402/api/payment', {\r\n            method: 'POST',\r\n            headers: {\r\n                Accept: 'application/json',\r\n                \"Content-Type\": 'application/json'\r\n            },\r\n            body: JSON.stringify(data)\r\n        }).then(result => {\r\n            return result.json();\r\n        }).catch(error => {\r\n            console.log(error);\r\n        });\r\n    }\r\n\r\n    isObj = (val) => {\r\n        return typeof val === 'object';\r\n    }\r\n\r\n    isDate = (val) => {\r\n        return Object.prototype.toString.call(val) === '[object Date]';\r\n    }\r\n\r\n    stringifyValue = (value) => {\r\n        if (this.isObj(value) && !this.isDate(value)) {\r\n            return JSON.stringify(value);\r\n        } else {\r\n            return value;\r\n        }\r\n    }\r\n\r\n    builfForm = (details) => {\r\n        const { action, params } = details;\r\n\r\n        const form = document.createElement('form');\r\n        form.setAttribute('method', 'post');\r\n        form.setAttribute('action', action);\r\n\r\n        Object.keys(params).forEach(key => {\r\n            const input = document.createElement('input');\r\n            input.setAttribute('type', 'hidden');\r\n            input.setAttribute('name', key);\r\n            input.setAttribute('value', this.stringifyValue(params[key]));\r\n            form.appendChild(input);\r\n        });\r\n        return form;\r\n    }\r\n\r\n    postTheInfo = (details) => {\r\n        const form = this.builfForm(details);\r\n        document.body.appendChild(form);\r\n        form.submit();\r\n        form.remove();\r\n    }\r\n\r\n    paymentHandler = () => {\r\n        if (this.state.totalPrice == 0) {\r\n            return;\r\n        }\r\n        const data = {\r\n            amount: this.state.totalPrice,\r\n            email: 'XXXXXXXX@gmail.com',\r\n            mobileNo: '9999999999'\r\n        };\r\n        this.getCheckSum(data)\r\n            .then(result => {\r\n                let information = {\r\n                    action: \"https://securegw-stage.paytm.in/order/process\", // URL of paytm server\r\n                    params: result\r\n                }\r\n                this.postTheInfo(information);\r\n            })\r\n            .catch(error => {\r\n                console.log(error);\r\n            });\r\n    }\r\n\r\n    render() {\r\n        const { restaurant, isMenuModalOpen, menu, totalPrice } = this.state;\r\n        return (\r\n            <div className=\"container py-5\">\r\n                {\r\n                    restaurant\r\n                    ?\r\n                    <div>\r\n                        <div className=\"images mt-5\">\r\n                        <Carousel dynamicHeight={false} showThumbs={false} infiniteLoop={true}>\r\n                            <div>\r\n                                <img src={require(\"../Assets/img2.jpg\").default} alt=\"myimage\" />\r\n                            </div>\r\n                            <div>\r\n                                <img src={require(\"../Assets/img1.jpg\").default} alt=\"myimage\" />\r\n                            </div>\r\n                            <div>\r\n                                <img src={require(\"../Assets/img3.jpg\").default} alt=\"myimage\" />\r\n                            </div>\r\n                            <div>\r\n                                <img src={require(\"../Assets/image.png\").default} alt=\"myimage\" />\r\n                            </div>\r\n                        </Carousel>\r\n                        </div>\r\n                        <div className=\"restName mt-4 mb-3\">\r\n                            { restaurant.name }\r\n                            <button className=\"btn btn-danger float-end\" onClick={this.openMenuHandler}>Place Online Order</button>\r\n                        </div>\r\n                        <div className=\"mytabs\">\r\n                            <Tabs>\r\n                                <TabList>\r\n                                    <Tab>Overview</Tab>\r\n                                    <Tab>Contact</Tab>\r\n                                </TabList>\r\n\r\n                                <TabPanel>\r\n                                    <div className=\"container\"> \r\n                                        <div className=\"about\">About this place</div>\r\n                                        <div className=\"cuisine\">Cuisine</div>\r\n                                        <div className=\"cuisines mt-1\">\r\n                                            {\r\n                                                restaurant.cuisine.map((item, index) => {\r\n                                                    return <span> { item.name }, </span>\r\n                                                })\r\n                                            }\r\n                                        </div>\r\n                                        <div className=\"cuisine mt-3\">Average Cost</div>\r\n                                        <div className=\"cuisines mt-1\">\r\n                                            &#8377; { restaurant.min_price } for two people (approx.)\r\n                                        </div>\r\n                                    </div>\r\n                                </TabPanel>\r\n                                <TabPanel>\r\n                                    <div className=\"container\">\r\n                                        <div className=\"cuisines my-3\">\r\n                                            Phone Number\r\n                                            <div className=\"text-danger\">\r\n                                                { restaurant.contact_number }\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className=\"cuisine mt-5\">{ restaurant.name }</div>\r\n                                        <div className=\"text-muted\">{ restaurant.locality }, { restaurant.city }</div>\r\n                                    </div>\r\n                                </TabPanel>\r\n                            </Tabs>\r\n                        </div>\r\n                        <Modal isOpen={isMenuModalOpen} style={customStyles}>\r\n                            <h3 className=\"restName\">{ restaurant.name }</h3>\r\n                            <button onClick={this.closeMenuHandler} className=\"btn btn-light closeBtn\">Close</button>\r\n                            <ul className=\"menu\">\r\n                                {\r\n                                    menu.map((item, index) => {\r\n                                        return <li key={index}>\r\n                                            <div className=\"row no-gutters menuItem\">\r\n                                                <div className=\"col-10\">\r\n                                                    {\r\n                                                        item.isVeg \r\n                                                        ?\r\n                                                        <div className=\"text-success\">Veg</div> \r\n                                                        :\r\n                                                        <div className=\"text-danger\">Non-Veg</div> \r\n                                                    }\r\n                                                    <div className=\"cuisines\">{ item.itemName }</div>\r\n                                                    <div className=\"cuisines\">&#8377;{ item.itemPrice }</div>\r\n                                                    <div className=\"cuisines item-desc text-muted\">{ item.itemDescription }</div>\r\n                                                </div>\r\n                                                <div className=\"col-2\">\r\n                                                    <button className=\"btn btn-light addButton\" onClick={() => this.addItemHnadler(item)}>Add</button>\r\n                                                </div>\r\n                                            </div>\r\n                                        </li>\r\n                                    })\r\n                                }\r\n                            </ul>\r\n                            <div className=\"mt-3 restName fs-4\">\r\n                                Subtotal  <span className=\"m-4\">&#8377;{ totalPrice }</span>\r\n                                <button className=\"btn btn-danger float-end\" onClick={this.paymentHandler}>Pay Now</button>\r\n                            </div>\r\n                        </Modal>\r\n                    </div>\r\n                    :\r\n                    <div className=\"text-dark m-5 p-5 fs-6\">Loading...</div>\r\n                }\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Details;"]},"metadata":{},"sourceType":"module"}